<!doctype html>
<html lang="de" class="dark bg-slate-950">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dominik Kasten – Webentwicklung & IT-Service aus Goslar</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="canonical" href="https://www.dominik-kasten.de/" />

    <meta property="og:title" content="Dominik Kasten – Full-Stack Webentwickler aus Goslar" />
    <meta
      property="og:description"
      content="Moderne Webentwicklung und IT-Dienstleistungen für Unternehmen aus Niedersachsen."
    />
    <meta property="og:image" content="https://dominik-kasten.de/social-preview.png" />
    <meta property="og:url" content="https://dominik-kasten.de" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="de_DE" />
    <meta property="og:site_name" content="Dominik Kasten" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="description"
      content="Ich bin Dominik Kasten, Full-Stack Entwickler aus Goslar. Ich entwickle moderne Weblösungen für Unternehmen in Niedersachsen und darüber hinaus."
    />

    <meta name="theme-color" content="#13141f" />

    <meta name="apple-mobile-web-app-title" content="Dominik Kasten" />
    <meta name="application-name" content="Dominik Kasten" />
    <meta name="msapplication-TileColor" content="#1a1c26" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Dominik Kasten",
        "url": "https://dominik-kasten.de",
        "image": "https://dominik-kasten.de/me.png",
        "description": "Full-Stack Webentwickler aus Goslar. Ich helfe Unternehmen in Niedersachsen mit maßgeschneiderter Webentwicklung und IT-Lösungen.",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Grauhöfer Str. 9",
          "addressLocality": "Goslar",
          "postalCode": "38640",
          "addressCountry": "DE"
        },
        "telephone": "+49-155-63846168"
      }
    </script>
    <!-- Deferred Google Analytics Setup - Only loads after consent -->
    <script>
      // Initialize stub dataLayer and gtag function
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }

      // Check for existing consent cookie
      function getCookie(name) {
        const nameEQ = name + '='
        const ca = document.cookie.split(';')
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i]
          while (c.charAt(0) === ' ') c = c.substring(1, c.length)
          if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length)
        }
        return null
      }

      // Store GA configuration for later use
      window.GA_CONFIG = {
        id: 'G-Y2MBSY2W6B',
        options: {
          anonymize_ip: true,
          cookie_flags: 'SameSite=None;Secure',
          send_page_view: false,
        },
      }

      // Load GA only if consent is already granted
      const consent = getCookie('cookie-consent')
      if (consent === 'ga-consent-granted') {
        loadGA()
      }

      // Function to load GA script
      function loadGA() {
        if (document.getElementById('ga-script')) return

        // Set default consent configuration (Consent Mode v2)
        gtag('consent', 'default', {
          ad_storage: 'denied',
          analytics_storage: 'denied',
          functionality_storage: 'denied',
          personalization_storage: 'denied',
          security_storage: 'granted',
          ad_user_data: 'denied', // Consent Mode v2
          ad_personalization: 'denied', // Consent Mode v2
          wait_for_update: 500,
        })

        // Set recommended Consent Mode v2 settings
        gtag('set', 'url_passthrough', true)
        gtag('set', 'ads_data_redaction', true)

        // Create and append GA script
        const script = document.createElement('script')
        script.id = 'ga-script'
        script.async = true
        script.src = 'https://www.googletagmanager.com/gtag/js?id=' + window.GA_CONFIG.id

        script.onload = function () {
          gtag('js', new Date())
          gtag('config', window.GA_CONFIG.id, window.GA_CONFIG.options)

          // If consent is already granted, update consent status
          if (consent === 'ga-consent-granted') {
            gtag('consent', 'update', {
              ad_storage: 'granted',
              analytics_storage: 'granted',
              functionality_storage: 'granted',
              personalization_storage: 'granted',
              ad_user_data: 'granted', // Consent Mode v2
              ad_personalization: 'granted', // Consent Mode v2
            })
            gtag('event', 'page_view')
          }
        }

        document.head.appendChild(script)
      }

      // Expose loadGA to window for use in our consent script
      window.loadGA = loadGA
    </script>
  </head>
  <body class="min-h-screen bg-gradient-to-b from-[#1a1c26] to-[#13141f]">
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
